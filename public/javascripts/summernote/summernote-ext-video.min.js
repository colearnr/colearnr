!function(e){var o=e.summernote.renderer.getTemplate(),t=e.summernote.eventHandler.getEditor(),r=function(o,t){var r="680",n="520";"small"===t.toLowerCase()?(r="400",n="280"):"medium"===t.toLowerCase()?(r="520",n="400"):"full"===t.toLowerCase()&&(r="840",n="680");var i=e('<iframe webkitallowfullscreen mozallowfullscreen allowfullscreen class="flex-video">').attr("src",o).attr("width",r).attr("height",n).attr("frameborder",0);return i[0]},n=function(){var o={};return e.summernote.allOptions&&e.summernote.allOptions.plugins&&e.summernote.allOptions.plugins.video&&(o=e.summernote.allOptions.plugins.video),e.Deferred(function(e){var t=o.uploadServerPrefix,r=o.storagePath,n=o.urlPrefix,i=o.embedSize;void 0===typeof window.filepicker?e.reject():window.filepicker.pickAndStore({extensions:["mov","mp4","m4v","webm","flv"],container:"modal",services:["COMPUTER","VIDEO"],openTo:"VIDEO",multiple:"false"},{location:"S3",path:r,access:"public"},function(o){if(o&&o[0]){var r=n+"&url="+encodeURIComponent(t+o[0].key)+"&embedSize="+i;e.resolve(r,i)}else e.reject()})})};e.summernote.addPlugin({name:"video",buttons:{video:function(){return o.iconButton("fa fa-youtube-play",{event:"showVideoDialog",title:"Video",hide:!0})}},events:{showVideoDialog:function(e){var o=e.editable();t.saveRange(o),n(o).then(function(e,n){t.restoreRange(o),t.insertNode(o,r(e,n))}).fail(function(){t.restoreRange(o)})},createVideoNode:function(e,o,n){var i=e.editable();t.restoreRange(i);var a=r(o,n);return t.insertNode(i,a),a}}})}(jQuery);