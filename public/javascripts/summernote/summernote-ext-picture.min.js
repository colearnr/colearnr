!function(e){var n=e.summernote.renderer.getTemplate(),t=e.summernote.eventHandler.getEditor(),i=function(){var n={};return e.summernote.allOptions&&e.summernote.allOptions.plugins&&e.summernote.allOptions.plugins.image&&(n=e.summernote.allOptions.plugins.image),e.Deferred(function(e){var t=n.uploadServerPrefix,i=n.storagePath;void 0===typeof window.filepicker?e.reject():window.filepicker.pickAndStore({extensions:[".jpg",".png",".gif",".jpeg"],container:"modal",services:["COMPUTER","URL","IMAGE_SEARCH","WEBCAM"],openTo:"COMPUTER",multiple:"false"},{location:"S3",path:i,access:"public"},function(n){if(n&&n[0]){var i=t+n[0].key;e.resolve(i)}else e.reject()})})};e.summernote.addPlugin({name:"image",buttons:{image:function(){return n.iconButton("fa fa-picture-o",{event:"showPictureDialog",title:"Image",hide:!0})}},events:{showPictureDialog:function(e){var n=e.editable();t.saveRange(n),i(n).then(function(e){t.restoreRange(n),t.insertImage(n,e,"")}).fail(function(){t.restoreRange(n)})}}})}(jQuery);